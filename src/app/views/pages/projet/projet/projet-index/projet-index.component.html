<div class="kt-portlet">
    <div class="kt-portlet__head">
        <div class="kt-portlet__head-label">
            <h3 class="kt-portlet__head-title">
                {{ 'MENU.LISTEPROJETS' | translate }}
            </h3>
        </div>
        <div class="kt-portlet__head-toolbar">
            <div *ngxPermissionsOnly="['canCreateProjet']" class="kt-portlet__head-actions">
                <a routerLink="/projet/projet-new" class="btn btn-outline-success btn-bold btn-sm">
                    <i class="fas fa-plus"></i> {{ 'PAGES.GENERAL.ADD' | translate }}
                </a>

            </div>
        </div>
    </div>
    <div class="kt-portlet__body">
        <div class="kt-section">
            <div class="example-header">
                <i class="flaticon-search-magnifier-interface-symbol text-dark"></i>&nbsp;
                <mat-form-field>
                    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="{{ 'PAGES.GENERAL.FILTER' | translate }}">
                </mat-form-field>
            </div>
            <div class="example-container mat-elevation-z8">

                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>

                    <!-- designation Column -->
                    <ng-container matColumnDef="designation">
                        <th class="designation" mat-header-cell *matHeaderCellDef mat-sort-header>
                            {{ 'PAGES.GENERAL.DESIGNATION' | translate }} </th>
                        <td class="designation" mat-cell *matCellDef="let row"> {{(row.designation.length>70)? (row.designation | slice:0:70)+' ...':(row.designation) }}</td>
                    </ng-container>
                    <!-- numeroMarche Column -->
                    <ng-container matColumnDef="numeroMarche">
                        <th class="num-marche" mat-header-cell *matHeaderCellDef mat-sort-header>
                            {{ 'PAGES.GENERAL.NUM_MARCHE' | translate }}
                        </th>
                        <td class="num-marche" mat-cell *matCellDef="let row"> {{row.numeroMarche}} </td>
                    </ng-container>
                    <!-- dateDebutPrevue Column -->
                    <ng-container matColumnDef="dateDebutPrevue">
                        <th class="date-debut-prevue" mat-header-cell *matHeaderCellDef mat-sort-header>
                            {{ 'PAGES.GENERAL.DATE_DEBUT_PREVUE' | translate }} </th>
                        <td class="date-debut-prevue" mat-cell *matCellDef="let row"> {{row.dateDebutPrevue|date:'dd/MM/yyyy'}} </td>
                    </ng-container>
                    <!-- dateDebutPrevue Column -->
                    <ng-container matColumnDef="dateFinPrevue">
                        <th class="date-fin-prevue" mat-header-cell *matHeaderCellDef mat-sort-header>
                            {{ 'PAGES.GENERAL.DATE_FIN_PREVUE' | translate }} </th>
                        <td class="date-fin-prevue" mat-cell *matCellDef="let row"> {{row.dateFinPrevue|date:'dd/MM/yyyy'}} </td>
                    </ng-container>
                    <!-- budgetProjet Column -->
                    <ng-container matColumnDef="budgetProjet">
                        <th class="budget" mat-header-cell *matHeaderCellDef mat-sort-header>
                            {{ 'PAGES.GENERAL.BUDGET_PROJET' | translate }} </th>
                        <td class="budget" mat-cell *matCellDef="let row"> {{row.budgetProjet| macurrency}} </td>
                    </ng-container>

                    <!-- Action Column -->
                    <ng-container matColumnDef="actions">
                        <th class="actions" mat-header-cell *matHeaderCellDef mat-sort-header>
                        </th>
                        <td class="actions" mat-cell *matCellDef="let row">
                            <button (click)="show(row.id)" class="btn btn-sm btn-clean btn-icon btn-success btn-icon-md btn_table_show"><i
                                    class="icon la la-search-plus"></i></button>
                            <button (click)="update(row.id)" class="btn btn-sm btn-clean btn-icon btn-warning btn-icon-md btn_table_edit"><i
                                    class="icon la la-edit"></i></button>
                            <!-- <button class="btn btn-sm btn-clean btn-icon btn-brand btn-icon-md btn_table_print"><i class="icon la la-print"></i></button> -->
                            <button class="btn btn-sm btn-clean btn-icon btn-danger btn-icon-md btn_table_delete" (click)="delete(row.id)"><i class="icon la la-trash"></i></button>
                            <a (click)="generateOrdreServiceSuivi(row.id)"  type="button" class="btn btn-sm btn-clean btn-icon btn-success btn-icon-md btn_table_show" matTooltip="Ordre Service Suivi">
                                <i class="flaticon2-download text-success"></i>
                    </a> 
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
                <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
            </div>
        </div>
    </div>
</div>